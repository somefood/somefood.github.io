---
layout: post
title: 자바(6) - 클래스
category: java
tags: [java]
comments: true
---

# 클래스와 객체 2

## this
this란 자신의 메모리를 가리키는 예약어이다. 즉, 생성된 인스턴스 스스로를 가르킨다.
이를 활용하여 인스턴스의 멤버 변수라던가 메서드를 호출하여 이것저것 해볼 수 있다.
아래 예제는 this로 다른 생성자 메서드를 호출해보는 것이다.
```java
class Person {
    String name;
    int age;
    
    Person() {
        this("이름 없음", 1);
    }
    
    Person(String name, int age) {
        this.name = name;
        this.age = age;
    }
}

public class CallAnotherConst {
    public static void main(String[] args) {
        Person noName = new Person();
        System.out.println(noName.name);
        System.out.println(noName.age);
    }
}
```
우리가 main메서드에서 매개변수가 없는 인스턴스를 생성했다. 위의 코드를 보면 Person()이 실행될텐데, this("이름 없음", 1)이 보일 것이다.
이것을 통해 새로운 생성자를 호출하여 멤버 변수들에 값을 추가했다.
this로 다른 생성자를 호출할 때 주의할 점으로는 this 이전에 다른 코드를 넣으면 안된다. 아래처럼 하면 IDE에서부터 빨간줄로 에러 표시를 해줄 것이다.
왜냐하면 생성자는 클래스가 생성될 때 호출되므로 클래스 생성이 완료되지 않은 시점에 다른 코드가 있으면 오류가 발생할 수 있기 때문이다.
```java
Person() {
    this.name = "noname";
    this("이름 없음", 1);
}
```

this를 사용하여 생성된 클래스 자신의 주소 값을 반환할 수 있다. 인스턴스 주소 값을 반환할 때는 this를 사용하고 반환형은 클래스 자료형을 사용한다.
```java
class Person {
    String name;
    int age;
    
    Person() {
        this("이름 없음", 1);
    }
    
    Person(String name, int age) {
        this.name = name;
        this.age = age;
    }
    
    Person returnItSelf() { // 자기 자신의 자료형 입력
        return this;
    }
}

public class CallAnotherConst {
    public static void main(String[] args) {
        Person noName = new Person();
        System.out.println(noName.name);
        System.out.println(noName.age);
        
        Person p = noName.returnItSelf();
        System.out.println(p);
        System.out.println(noName);
    }
}
```
returnItSelf 메서드는 this를 반환하기에 인스턴스 변수 p도 같은 인스턴스를 가르키고 같은 결과가 출력될 것이다.

## 객체 간 협력

객체 지향 프로그램은 객체를 정의하고 객체 간 협력으로 만드는 것이다. 예를 들어 학생 객체가 있고, 지하철 객체, 버스 객체를 만들어서 학생이 버스를 타면 버스에 맞는 협력이
지하철을 타면 지하철에 맞는 결과가 만들어 지는 것이다. 아래의 예제를 만들어 보자.

### 학생 클래스
```java
public class Student {
    public String studentName;
    public int grade;
    public int money;
    
    public Student(String studentName, int money) {
        this.studentName = studentName;
        this.money = money;
    }
    
    public void takeBus(Bus bus) {
        bus.take(1000);
        this.money -= 1000;
    }
    
    
    public void takeSubway(Subway subway) {
        subway.take(1000);
        this.money -= 1500;
    }
    
    public void showInfo() {
        System.out.println(studentName + "님의 남은 돈은 " + money + "입니다.");
    }
}
```

takeBus, Subway 메소드를 보면 매개변수로 Bus와 Subway 자료형을 넣어 주었다. 이는 Bus와 Subway 참조변수로 지정하여 메소드들을 호출하기 위해서이다.

### Bus 클래스
Subway클래스도 이름만 바꿔서 똑같이 해주면 된다.
```java
public class Bus {
    int busNumber;
    int passengerCount;
    int money;
    
    public Bus(int busNumber) {
        this.busNumber = busNumber;
    }
    
    public void take(int money) {
        this.money += money;
        passengerCount++;
    }
    
    public void showInfo() {
        System.out.println("버스 " + busNumber + "번의 승객은 " + passengerCount + "명이고, 수입은 " + money + "입니다.");
    }
}
```

이제 클래스를 만들었으니 협력해보는 코드를 봐보자.
```java
Student st1 = new Studnet("Hong", 5000);

Bus bus100 = new Bus(100);
st1.takeBus(bus100);
st1.showInfo();
bus100.showInfo();
```

## static 변수
학생 클래수에서 학번을 우리가 지정하지 않고 자동으로 생성되게끔 하고 싶다. 그럴려면 생성될 때마다 순서대로 번호를 지정해주어야 하고, 인스턴스 멤버 변수가 아닌 클래스 전반적으로
공통으로 사용하는 변수를 만들 수 있어야 한다. 이를 위해 static 변수를 선언하여 사용한다.
static 변수란 다른 용어로 '정적 변수'라고 하고 다음과 같이 선언한다.
```java
static int serialNum;
```
기존 변수 선언에다가 앞에 static만 붙혀주면 된다. static 변수는 다른 멤버변수들 처럼 인스턴스가 생성될 때마다 새로 생성되는 변수가 아닌 프로그램이 실행되어
메모리에 올라갔을 때 딱 한 번 메모리 공간에 할당된다. 그리고 이 값을 모든 인스턴스가 공유하여 사용한다. 
static으로 선언한 변수는 인스턴스 생성과 상관없이 먼저 생성되고 그 값을 공유한다고 하여 클래스 변수라고도 부른다.
